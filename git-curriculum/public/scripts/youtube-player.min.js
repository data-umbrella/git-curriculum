class YouTubePlayer extends HTMLElement{constructor(){super(),this.src=this.getAttribute("data-src");const e=new URL(this.src);this.videoId=e.hostname==="youtu.be"?e.pathname.slice(1):new URLSearchParams(e.search).get("v"),this.playlistId=new URLSearchParams(e.search).get("list"),this.startAt=new URLSearchParams(e.search).get("index"),this.attachShadow({mode:"open"})}connectedCallback(){this.shadowRoot.innerHTML=`
     <style>
.container {
    border-radius: var(--theme-border-radius);
    box-shadow: var(--theme-box-shadow);
    background-color: black; //always black in this case for Youtube
    overflow: hidden;
   }
  .container, .thumbnail {
    width:100%;
    max-width:100%;
    aspect-ratio: 16/9;
    display:grid;
    grid-template: "thumbnail" auto / 1fr;
    place-items: center;
  }

  .thumbnail img {
    grid-area: thumbnail;
    object-fit: cover;
    max-width: 100%;
  }

  .play-button {
    cursor: pointer;
    transition: transform 0.2s;
    grid-area: thumbnail;
    font-size:72px;
    filter : drop-shadow(var(--theme-drop-shadow));
  }

  .play-button:hover, .play-button:focus {
    transform: scale(1.2);
  }
  iframe {
    grid-area: thumbnail;
    aspect-ratio: 16 / 9;
    width: 100%;
    height: 100%;
  }
  .has-video iframe {
   animation: fade-in .3s ease-in-out;
  }
  @keyframes fade-in {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}
</style>
      <div class="container">
      <div class="thumbnail">
        <img src="//i.ytimg.com/vi/${this.videoId}/maxresdefault.jpg" alt="Video thumbnail">
        <div class="play-button" role="button" title="play video">ðŸ“¼</div>
      </div>
      </div>
    `,this.shadowRoot.querySelector(".play-button").addEventListener("click",()=>{const e=document.createElement("iframe"),n=`https://www.youtube.com/embed/${this.videoId}?autoplay=1`+`&cc_load_policy=1`+(this.playlistId?`&list=${this.playlistId}`:"")+(this.startAt?`&index=${this.startAt}`:"");e.setAttribute("src",n),e.setAttribute("title","Youtube Video"),e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen",""),e.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share");const t=this.shadowRoot.querySelector(".container");t.classList.add("has-video"),t.removeChild(this.shadowRoot.querySelector(".thumbnail")),t.appendChild(e)})}}customElements.define("youtube-player",YouTubePlayer)